---
title: 借助云服务器搭建穿透服务
date: 2025-08-18 14:00:00
categories: 生活日常
tags: 
  - Minecraft
  - 笔记
  - 随笔
  - 游戏
location: 南宁
cover: https://image-head.gbfun.cc///imgbg0_1_c490ca5.webp?blog-image?&imageSlim
---



## 借助云服务器搭建穿透服务

使用环境: 

- 云服务器:Ubuntu 22.04 64位
- 本机: Windows 11

### 服务端配置

1. 使用ssh连接云服务器地址,根目录下创建`frps`文件夹,具体路径为`/root/frps`

2. 下载[frps](https://github.com/fatedier/frp),(建议先解压出来查看文件,杀毒软件会消杀frpc.exe文件,注意文件完整性),解压`frp_0.64.0_linux_amd64.tar.gz` `frp_0.64.0_windows_amd64.zip`,并放至相关路径备用,

3. 编辑`frps.toml`文件,并替换复制以下内容

```toml
[common]
# 服务端连接端口(从客户端想连接上服务端,就得连接这个端口)
bind_port = 7000
# 用于防止任何人连接上这个服务器,来设置的一层密码(需要客户端也对应,如果没有这个其他人可以随意连接上)
# token = 12345678
# 请求监听端口(用于监听接收到的请求)(这两个参数可以不要,不影响内网穿透)
# vhost_http_port = 80
# vhost_https_port = 443

# 面板端口,账号密码(frp的可视化面板)(如果没有就没有可视化面板)
dashboard_port = 7500
dashboard_user = admin
dashboard_pwd = admin
```

4. 上传`frps` `frps.toml`到服务器的新建目录`/root/frps`下并给予777权限,即全部权限
5. 切换至文件夹`cd /frps`; 运行命令`./frps -c ./frps.toml`启动

6. 以上步骤操作完你就可以使用`服务器公网地址+:7500`端口号进入可视化面板了

7. 如果你使用的操作系统是`centos7`等,需要安装`systemd`,具体你可以查阅相关教程;Ubuntu 15.04以后自带systemd,可以忽略安装.
8. 打开新终端页面,找到`/etc/systemd/system`目录,并创建`frps.service`文件,用于配置frps服务,文件内容如下:

```toml
[Unit]
# 服务名称,可自定义
Description =frp server
After = network.target syslog.target
Wants = network.target

[Service]
Type = simple
# 启动frps的命令,需要修改为你的frps安装路径
ExecStart = /fprs/frps -c /frps/frps.toml

[Install]
WantedBy = multi-user.target
```

9. 切换`cd /frps`文件夹,启动frps,查看运行状态,有绿灯即为成功,相关命令如下:

```
# 启动frp
systemctl start frps
# 停止frp
systemctl stop frps
# 重启frp
systemctl restart frps
# 查看frp状态
systemctl status frps
# 配置frps服务开机自启动
systemctl enable frps
# 重新加载
systemctl daemon-reload
```

至此,服务端配置结束



### 客户端配置

1. 你想要的路径新建`/frpc`文件夹,移动压缩包内文件`frpc.exe` `frpc.toml`到新路径

2. 编辑`frpc.toml`文件

```toml
serverAddr = "服务器ip"
serverPort = 7000

[[proxies]]
name = "test-tcp"
type = "tcp"
localIP = "127.0.0.1"
# 本地需要映射的端口,比如这里是远程桌面的端口,以下是我的世界服务器端口
localPort = 3389
# 你想要的端口,随便修改,不占用即可
remotePort = 4000

[[proxies]]
name = "mc-tcp"
type = "tcp"
localIP = "127.0.0.1"
localPort = 25565
remotePort = 25565
```

3. 终端切换至frpc文件夹`cd C:\frpc`,运行`frpc -c frpc.toml`有以下输出,即为成功

```cmd
2025-08-16 11:56:38.671 [I] [sub/root.go:149] start frpc service for config file [frpc.toml]
2025-08-16 11:56:38.679 [I] [client/service.go:319] try to connect to server...
2025-08-16 11:56:38.721 [I] [client/service.go:311] [276458cb682bed57] login to server success, get run id [276458cb682bed57]
2025-08-16 11:56:38.721 [I] [proxy/proxy_manager.go:177] [276458cb682bed57] proxy added: [test-tcp mc-tcp]
2025-08-16 11:56:38.734 [I] [client/control.go:172] [276458cb682bed57] [test-tcp] start proxy success
2025-08-16 11:56:38.735 [I] [client/control.go:172] [276458cb682bed57] [mc-tcp] start proxy success
```

4. 保活服务,下载[nssm](https://nssm.cc/download),并解压到frpc文件夹,方便管理

```cmd
# 启动命令
nssm install frpc
```

`path项`选择`frpc.exe`

`Arguments`写入`-c frpc.toml`

至此完成客户端配置

### 使用自己的域名作为游戏服务器地址

{ % link 游戏服务器使用域名替换IP和端口,BlackAnnin,https://blackannin.cn/2025/05/19/aliyunIP/ %}

