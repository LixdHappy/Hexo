#footer-wrap 
  if theme.footer.socialBar.enable
    - let centerImg = theme.footer.socialBar.centerImg ? theme.footer.socialBar.centerImg : theme.avatar.img
    - let leftInfo = theme.footer.socialBar.left
    - let rightInfo = theme.footer.socialBar.right
    #footer_deal
      each item, index in leftInfo
        a.deal_link(href=url_for(item.link) title=item.title gbtip=item.title)
          if (item.icon.startsWith("fa"))
            i(class=`${item.icon}`)
          else if (item.icon.startsWith("icon"))
            svg.icon(aria-hidden="true")
              use(xlink:href=`#`+ item.icon)
          else if (item.icon.startsWith("anzhiyu"))
            i.anzhiyufont(class=`${item.icon}`)
      img.footer_mini_logo(title="è¿”å›žé¡¶éƒ¨", alt="è¿”å›žé¡¶éƒ¨" gbtip="è¿”å›žé¡¶éƒ¨" onclick="anzhiyu.scrollToDest(0, 500)", src=centerImg, size="50px")
      each item, index in rightInfo
        a.deal_link(href=url_for(item.link) title=item.title gbtip=item.title)
          if (item.icon.startsWith("fa"))
            i(class=`${item.icon}`)
          else if (item.icon.startsWith("icon"))
            svg.icon(aria-hidden="true")
              use(xlink:href=`#`+ item.icon)
          else if (item.icon.startsWith("anzhiyu"))
            i.anzhiyufont(class=`${item.icon}`)

  if theme.footer.owner.enable && !theme.footer.footerBar.enable
    - var nowYear = new Date().getFullYear()
    if theme.footer.owner.since && theme.footer.owner.since != nowYear
      .copyright!= `&copy;${theme.footer.owner.since} - ${nowYear} By ${config.author}`
    else
      .copyright!= `&copy;${nowYear} By ${config.author}`

  - let work_img = theme.footer.runtime.work_img
  - let work_description = theme.footer.runtime.work_description
  if theme.footer.runtime.enable
    #workboard
      if work_img != null
        img(src=`${work_img}`, alt=`${work_description}`, title=`${work_description}`, class="workSituationImg boardsign")
      #runtimeTextTip
  if theme.footer.custom_text
    .footer_custom_text!=`${theme.footer.custom_text}`

  if theme.footer.list.enable
    - let projectList = theme.footer.list.project
    #anzhiyu-footer
      each item, index in projectList
        .footer-group
          .footer-title=item.title
          .footer-links
            each iten, indey in item.links
              a.footer-item(title=iten.title href=url_for(iten.link))=iten.title
      if theme.footer.list.randomFriends > 0
        .footer-group
          .footer-title-group
            .footer-title å‹é“¾
            a.random-friends-btn#footer-random-friends-btn(href="javascript:addFriendLinksInFooter();" title="æ¢ä¸€æ‰¹å‹æƒ…é“¾æŽ¥" gbtip="æ¢ä¸€æ‰¹å‹æƒ…é“¾æŽ¥")
              i.anzhiyufont.anzhiyu-icon-arrow-rotate-right
          .footer-links#friend-links-in-footer

  if theme.footer.bdageitem.enable
    p#ghbdages
      each item in theme.footer.bdageitem.list
        a.github-badge(target='_blank' href=item.link style='margin-inline:5px' data-title=item.message title=item.message gbtip=item.message)
          img(src=item.shields alt=item.message)

if theme.footer.footerBar && theme.footer.footerBar.enable
    #footer-bar
      .footer-bar-links
        .footer-bar-left
          #footer-bar-tips
            if theme.footer.owner.enable
              - var nowYear = new Date().getFullYear()
              - let authorLink = theme.footer.footerBar.authorLink ? theme.footer.footerBar.authorLink : config.url
              if theme.footer.owner.since && theme.footer.owner.since != nowYear
                .copyright!= `&copy;${theme.footer.owner.since} - ${nowYear} By `
                  a.footer-bar-link(href=url_for(authorLink) target="_blank" gbtip="å‰å¾€æˆ‘çš„ä¸»é¡µ")
                    img.author-avatar(src="/img/åšå®¢é™æ€å¤´åƒ.jpg" alt="avatar")
                    = config.author
              else
                .copyright!= `&copy;${nowYear} By `
                  a.footer-bar-link(href=url_for(authorLink) target="_blank" gbtip="å‰å¾€æˆ‘çš„ä¸»é¡µ")
                    img.author-avatar(src="/img/åšå®¢é™æ€å¤´åƒ.jpg" alt="avatar")
                    = config.author
            if theme.footer.footerBar.showBeian
              .beian-group
                a.footer-bar-link(
                  href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11011402054421"
                  target="_blank"
                  rel="noopener external nofollow noreferrer"
                  title="äº¬å…¬ç½‘å®‰å¤‡xxxxxxxå·"
                  gbtip="å‰å¾€å…¨å›½äº’è”ç½‘å®‰å…¨ç®¡ç†æœåŠ¡å¹³å°"
                )
                  img.beian-icon(
                    src="https://p.zhheo.com/VPiMHH24891181731917988329.png!cover"
                    alt="äº¬å…¬ç½‘å®‰å¤‡xxxxxxxxå·"
                  )
                  span äº¬å…¬ç½‘å®‰å¤‡xxxxxxxxå·
                a.footer-bar-link(
                  href="https://beian.miit.gov.cn/#/Integrated/index"
                  target="_blank"
                  rel="noopener external nofollow noreferrer"
                  title="æ¡‚ICPå¤‡2025067806å·-1"
                  gbtip="å‰å¾€å·¥ä¸šå’Œä¿¡æ¯åŒ–éƒ¨æ”¿åŠ¡æœåŠ¡å¹³å°"
                ) æ¡‚ICPå¤‡2025067806å·-1

                a.footer-bar-link.allsite_ok(
                  href="https://status.gbfun.cc/"
                  target="_blank"
                  rel="noopener external nofollow noreferrer"
                  id="allsite_status"
                  gbtip="æŸ¥çœ‹æˆ‘çš„é¡¹ç›®çŠ¶æ€"
                )
                  .status-light
                  span çŠ¶æ€æ£€æµ‹ä¸­...

        #footer-type-tips
          if theme.footer.footerBar && theme.footer.footerBar.subTitle && theme.footer.footerBar.subTitle.enable
            .js-pjax
              include ./third-party/footerBarSubtitle.pug
        .footer-bar-right
          each item in theme.footer.footerBar.linkList
            a.footer-bar-link(href=url_for(item.link) title=item.text )=item.text
          if theme.footer.footerBar.cc.enable
            a.footer-bar-link.cc(href=url_for(theme.footer.footerBar.cc.link) title="ccåè®®" gbtip="ç½‘ç«™é‡‡ç”¨ ç½²å-éžå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç»Ž 4.0 å›½é™… æ ‡å‡†")
              i.anzhiyufont.anzhiyu-icon-copyright-line
              i.anzhiyufont.anzhiyu-icon-creative-commons-by-line
              i.anzhiyufont.anzhiyu-icon-creative-commons-nc-line
              i.anzhiyufont.anzhiyu-icon-creative-commons-nd-line
          if theme.footer.footerBar.badge.enable
            a.footer-bar-link.badge(
              href=theme.footer.footerBar.badge.link
              title=theme.footer.footerBar.badge.title
              gbtip="åŠ å…¥æ— èŠæ¹¾å§ðŸ¥±"
              target="_blank"
              style="margin-left:8px"
            )
              img(
                src=`https://boringbay.com/api/badge/${theme.footer.footerBar.badge.domain}`
                height=theme.footer.footerBar.badge.height
                alt=theme.footer.footerBar.badge.title
              )

script.
  function updateStatusLight() {
    const statusEl = document.getElementById("allsite_status");
    if (!statusEl) return;

    const spanText = statusEl.querySelector("span");

    fetch("/status.json?t=" + Date.now())
      .then(response => response.json())
      .then(data => {
        const monitors = data.monitors || [];
        const total = monitors.length;
        const downCount = monitors.filter(m => m.status !== 2).length;

        let statusLabel = "";
        let className = "";

        if (downCount === 0) {
          statusLabel = "æ‰€æœ‰ä¸šåŠ¡æ­£å¸¸";
          className = "allsite_ok";
        } else if (downCount < total) {
          statusLabel = "éƒ¨åˆ†ä¸šåŠ¡å¼‚å¸¸";
          className = "allsite_error";
        } else {
          statusLabel = "å…¨éƒ¨ä¸šåŠ¡å¼‚å¸¸";
          className = "allsite_error";
        }

        // æ›´æ–°çŠ¶æ€æ–‡æœ¬
        if (spanText) spanText.innerText = statusLabel;

        // ä½¿ç”¨ status.json ä¸­çš„ updated_at å­—æ®µ
        if (data.updated_at) {
          statusEl.setAttribute("title", "æœ€æ–°æ›´æ–°æ—¶é—´: " + data.updated_at);
        } else {
          const now = new Date().toLocaleString("zh-CN");
          statusEl.setAttribute("title", "æœ€æ–°æ›´æ–°æ—¶é—´: " + now);
        }

        // æ›¿æ¢ class
        statusEl.classList.remove("allsite_ok", "allsite_error");
        statusEl.classList.add(className);
      })
      .catch(error => {
        console.error("çŠ¶æ€æ£€æµ‹å¤±è´¥:", error);
        if (spanText) spanText.innerText = "çŠ¶æ€æ£€æµ‹å¤±è´¥";
        statusEl.setAttribute("title", "çŠ¶æ€æ£€æµ‹å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•");
        statusEl.classList.remove("allsite_ok");
        statusEl.classList.add("allsite_error");
      });
  }

  // é¦–æ¬¡åŠ è½½
  document.addEventListener("DOMContentLoaded", () => {
    updateStatusLight();
    setInterval(updateStatusLight, 1800000); // æ¯ 30 åˆ†é’Ÿè‡ªåŠ¨æ£€æµ‹
  });

  // å…¼å®¹ PJAXï¼šé¡µé¢åˆ‡æ¢åŽé‡æ–°æ‰§è¡Œ
  document.addEventListener("pjax:complete", () => {
    updateStatusLight();
  });
